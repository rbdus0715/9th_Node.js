- 워크북에서는 **JWT(Stateless)** 기반의 인증(Access/Refresh 흐름)을 배웠습니다. 이와 대비되는 **전통적인 인증 방식**으로는 'Cookie 기반의 **Session(Stateful)**'이 있습니다. 9주차 이론에서 간단히 짚고 넘어갔던 **'세션 기반 인증'**이 정확히 무엇인지, **JWT 방식과 비교했을 때 각각 어떤 장단점**이 있는지 찾아 정리해주세요.
    
    
    세션 기반 인증은 서버가 사용자의 로그인 상태 정보(세션)를 메모리나 데이터베이스에 직접 저장하고, 클라이언트에게는 그 정보에 접근할 수 있는 세션 ID만 쿠키로 부여하여 인증을 관리하는 Stateful(상태 유지) 방식입니다.
    
    JWT와 비교했을 때 가장 큰 차이는 인증 정보의 저장 위치와 서버의 상태 관리 여부이다.
    
    ## **세션 기반 인증의 작동 원리 (Stateful)**
    
    1. 로그인: 사용자가 ID/PW를 보냄
    2. 세션 생성: 서버는 검증 후 고유한 세션 ID를 생성하고, 사용자 정보(유저 ID, 권한 등)를 서버 측 저장소(메모리, DB, Redis 등)에 저장합니다.
    3. 쿠키 발급: 서버는 브라우저에게 이 세션 ID를 쿠키에 담아 보낸다. 
        1. 이때 httpOnly 옵션을 설정하여 자바스크립트가 접근하지 못하게 보안을 강화할 수 있다
    4. 요청 및 검증: 이후 사용자가 요청을 보낼 때마다 브라우저는 자동으로 쿠키(세션 ID)를 함께 보낸다. 서버는 이 ID를 자신의 저장소에서 조회하여 유저를 식별한다.
    
    ## **비교**
    
    | 비교 항목 | 세션 (Session) 기반 인증 | JWT (Token) 기반 인증 |
    | --- | --- | --- |
    | 상태 관리 | Stateful (유 상태): 서버가 로그인 정보를 저장하고 있음. | Stateless (무 상태): 서버는 정보를 저장하지 않고, 토큰 자체를 검증. |
    | 확장성 (Scalability) | 낮음: 사용자가 늘어나면 서버 메모리/DB 부하가 커짐. 서버가 여러 대일 경우 세션 동기화(Clustering/Redis)가 필요함. | 높음: 서버는 토큰 서명만 확인하면 되므로 확장이 용이함. 별도의 동기화 없이 여러 서버에서 처리 가능. |
    | 제어권 (Control) | 강함: 서버가 세션을 강제로 삭제하면 즉시 로그아웃(강제 퇴장)이나 기기별 차단이 가능함. | 약함: 한 번 발급된 토큰은 만료될 때까지 서버가 제어하기 어려움 (Blacklist 관리가 별도로 필요). |
    | 보안 취약점 | CSRF 취약: 쿠키가 자동으로 전송되는 특징을 이용한 공격에 취약함.XSS 안전: httpOnly 설정 시 스크립트 탈취 불가능. | XSS 취약: 로컬 스토리지 저장 시 탈취 위험 큼.탈취 시 위험: 토큰 자체가 인증서라 탈취되면 만료 전까지 해커가 사용 가능. |
    | 데이터 크기 | 작음: 쿠키에는 짧은 'ID 문자열'만 오고 감. | 큼: 토큰 내부에 사용자 정보(Claim)가 포함되어 있어 길이가 긺. |
    
    ## XSS
    
    XSS 공격은 주로 웹 애플리케이션이 사용자로부터 입력받은 데이터를 적절한 검증(Validation)이나 인코딩(Encoding) 없이 그대로 웹 페이지 출력에 사용할 때 발생합니다. 
    
    시나리오
    
    1. **악성 스크립트 삽입:** 공격자가 게시판 댓글 작성 시, 일반 텍스트 대신 `<script>...악성코드...</script>` 같은 악성 자바스크립트 코드를 입력합니다.
    2. **서버 저장 및 반환:** 웹 서버는 이 악성 스크립트가 포함된 댓글 내용을 데이터베이스에 저장하고, 다른 사용자가 게시판 페이지를 요청할 때 저장된 내용을 그대로 반환합니다.
    3. **피해자 브라우저에서 실행:** 다른 사용자의 브라우저는 서버로부터 받은 HTML 코드(악성 스크립트 포함)를 신뢰할 수 있는 출처(게시판 웹사이트)에서 온 것으로 간주하고 **스크립트를 실행**합니다.
    4. **정보 탈취/악용:** 실행된 악성 스크립트는 피해자의 브라우저에 저장된 쿠키(세션 ID 등), 로컬 스토리지 데이터에 접근하여 공격자의 서버로 전송합니다. 공격자는 탈취한 정보로 피해자를 사칭할 수 있습니다.
    - **세션 기반 인증:**
        - 세션 ID가 **쿠키**에 저장됩니다. 이때 쿠키에 `HttpOnly` 옵션을 설정하면 자바스크립트가 쿠키에 접근하는 것을 막을 수 있습니다. 이는 XSS 공격으로 세션 ID가 탈취되는 것을 효과적으로 방어할 수 있는 강력한 보안 수단입니다.
    - **JWT 기반 인증:**
        - JWT 토큰을 **`localStorage`*나 **`sessionStorage`*에 저장하는 방식은 XSS 공격에 매우 취약합니다. 악성 스크립트가 실행되면 `localStorage`에 저장된 토큰을 쉽게 읽어 공격자에게 전송할 수 있습니다.
    
    정리
    
    - 세션 방식은 동시 접속자 수가 적당하고, 보안상 강제 로그아웃 등의 즉각적인 관리가 중요한 서비스(예: 관리자 페이지, 금융권)에서 유리
    - JWT 방식은 대규모 트래픽 처리가 필요하거나, 모바일 앱/웹 간의 연동, MSA(마이크로서비스) 환경처럼 확장성이 중요한 서비스에서 선호됨